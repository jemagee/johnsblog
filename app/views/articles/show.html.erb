<h1 class="page-header">
  <%= @article.title %>
</h1>

  <% if !@article.category.nil? %>
    <h3>
      Category: <%= @article.category.name %>
    </h3>
  <% end %>


<div class="abstract">
  Abstract: <%= @article.abstract %>
</div>

<div class="article-body">
  <h4>Article Body</h4>
  <%= @article.body %>
</div>
<% admins_only do %>
  <p>
    Status: <%= @article.status.upcase %>
  </p>
  <div class="btn-group">
    <%= link_to "Edit Article", edit_admin_article_path(@article), class: "btn btn-success" %>
    <% if !@article.published? %>
      <%= link_to "Publish Article", publish_admin_article_path(@article), class: "btn btn-info" %>
    <% end %>
    <%= link_to "Delete Article", admin_article_path(@article), method: :delete, data: { confirm: "Are you sure you want to delete this article" }, class: "btn btn-danger" %> 
  </div>
<% end %>

<% if @article.published? %>
  <%= link_to "Add Comment", new_article_comment_path(@article) %>

  <% @article.comments.each do |comment| %>
    <div id="comment-<%= comment.id %>" >
      <%= comment.title %>
      <%= comment.body %>
      <%= link_to "Edit Comment", [:edit, @article, comment] %>
   </div>
  <% end %>
  <%= form_for([@article, @article.comments.build], html: {id: "new_comment_form" } ) do |f|  %>

    <%= f.label :title %>
    <%= f.text_field :title %>

    <%= f.label :body, "Comment" %>
    <%= f.text_area :body %>

    <%= f.submit %>
  <% end %>
<% end %>

